<header class="header" th:fragment="header">
    <div class="top-banner">
        <div class="container">
            <div class="banner-content">
                <span>Sản phẩm Chính hãng - Xuất VAT đầy đủ</span>
                <span>Tải App Smember - Tích điểm & nhận ưu đãi</span>
                <span>Giao nhanh - Miễn phí cho đơn từ 300K</span>
            </div>
        </div>
    </div>

    <div class="main-header">
        <div class="container">
            <div class="logo">
                <a href="/">
                    <!--<img src="https://cellphones.com.vn/media/logo/logo.png" alt="Tstore">-->
                    T-Store
                </a>
            </div>

            <div class="header-menu">
                <button class="menu-btn">
                    <i class="bi bi-list"></i>
                    Danh mục
                </button>
                <!-- Danh sách danh mục -->
                <div class="category-dropdown d-none" id="categoryDropdown">
                    <ul>
                        <li th:each="cat : ${categories}">
                            <a th:href="@{'/products?category=' + ${cat.categoryId}}" th:text="${cat.categoryName}"></a>
                        </li>
                    </ul>
                </div>

                <div class="location-select">
                    <i class="bi bi-geo-alt"></i>
                    <select class="form-select form-select-sm">
                        <option>Hà Nội</option>
                        <option>TP.HCM</option>
                    </select>
                </div>

                <div class="search-box">
                    <form class="form-control d-flex" action="/products" method="get">
                        <input type="text" class="form-control" name="keyword" placeholder="Bạn cần tìm gì?" th:value="${keyword}">
                        <button class="btn btn-primary" type="submit">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                </div>

                <div class="header-actions">
                    <a href="tel:1800.2097" class="action-item">
                        <i class="bi bi-telephone"></i>
                        <span>Gọi mua hàng<br>1800.2097</span>
                    </a>

                    <a href="/store" class="action-item">
                        <i class="bi bi-shop"></i>
                        <span>Cửa hàng<br>gần bạn</span>
                    </a>

                    <a href="/user/track-order" class="action-item">
                        <i class="bi bi-truck"></i>
                        <span>Tra cứu<br>đơn hàng</span>
                    </a>

                    <!-- Gio hang -->
                    <th:block th:if="${user==null}">
                        <a href="/user/carts" class="action-item">
                            <i class="bi bi-cart"></i>
                            <span>Giỏ<br>hàng</span>
                        </a>
                    </th:block>
                    <th:block th:if="${user!=null}">
                        <a href="/user/carts" class="action-item position-relative">
                            <i class="bi bi-cart"></i>
                            <span class="d-block">Giỏ<br>hàng</span>
                            <!--<span th:if="${countCart > 0}"
                                  th:text="${countCart}"
                                  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            </span>-->
                            <span th:if="${countCart > 0}"
                                  th:text="${countCart}"
                                  class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            </span>
                        </a>
                    </th:block>

                    <!--Dang nhap -->
                    <th:block th:if="${user==null}">
                        <a href="/login" class="action-item">
                            <i class="bi bi-person"></i>
                            <span>Đăng nhập</span>
                        </a>
                    </th:block>
                    <th:block th:unless="${user==null}">
                        <a href="/user/profile" class="action-item">
                            <i class="bi bi-person"></i>
                            <span th:text="${user.name}"></span>
                        </a>
                    </th:block>

                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const menuBtn = document.querySelector(".menu-btn");
            const categoryDropdown = document.getElementById("categoryDropdown");

            menuBtn.addEventListener("click", function () {
                categoryDropdown.classList.toggle("d-none");
            });

            document.addEventListener("click", function (e) {
                if (!menuBtn.contains(e.target) && !categoryDropdown.contains(e.target)) {
                    categoryDropdown.classList.add("d-none");
                }
            });
        });
    </script>



</header>










